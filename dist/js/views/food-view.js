define(["jquery","backbone","underscore","setup"],function(e,t,s,i){var o=t.View.extend({tagName:"tr",initialize:function(){this.template=s.template(e("#food-template").html()),this.render()},events:{"click .option":"addFood","click .delete":"removeFood"},render:function(){return this.$el.append(this.template(this.model.toJSON())),this},addFood:function(){return i.messages.trigger("countFood",this.model),this.model.set({today:!0}),"apiResults"===i.whichList?i.messages.trigger("foodToAdd",this.model):this.incrementServings(),!1},incrementServings:function(){var e=this.model.get("servings")+1;return this.model.set({servings:e}),"today"===i.whichList&&this.$(".option").text(e),!1},removeFood:function(){if(!this.model.get("today"))return i.messages.trigger("removeFood",this.model),void i.messages.trigger("reviseMyList");if("today"!==i.whichList)return void alert("Foods on the Today list cannot be removed");var e=this.model.get("servings")-1;e?(this.model.set({servings:e}),this.$(".option").text(e),i.messages.trigger("adjustTotalsDown",this.model)):(this.model.set({servings:e}),this.model.set({today:!1}),i.messages.trigger("adjustTotalsDown",this.model),i.messages.trigger("reviseToday"))}});return o});