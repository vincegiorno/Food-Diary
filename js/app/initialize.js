define(["jquery","setup","views/appview","bootstrap"],function(e,a,t){function r(){var e=i.val(),a=/^\S+([\.-]?\S+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;if(!a.test(e))return d.removeClass("hidden"),void setTimeout(function(){d.addClass("hidden")},3e3);var t=encodeURIComponent(e).replace(/\./g,"%2E");localStorage.setItem("food-diary-id",t),n.modal("hide"),o(t)}function o(e){try{appview=new t([],{id:e})}catch(r){a.alertGraph.text("Sorry, but the app was unable to start. Please check your Internet connection and try again, or try later."),a.alertGraph.addClass("alert alert-danger"),a.alertGraph.removeClass("hidden")}}var n=e("#sign-in"),i=e("#idBox"),d=e("#input-error"),l=function(){var a=localStorage.getItem("food-diary-id");a?(a=encodeURIComponent(a).replace(/\./g,"%2E"),o(a)):(n.modal({keyboard:!1}),n.modal("show"),e("#sign-in-button").click(r))};return l});